# 実装計画

- [x] 1. プロジェクト基盤とコア型定義の設定
  - Next.js App Routerプロジェクトの初期設定とTailwindCSS、shadcn/ui導入
  - TypeScript型定義ファイル（Item, Tag, Status, Settings等）の作成
  - 基本的なディレクトリ構造の構築
  - _要件: 1.1, 2.1, 12.4_
  - メモ: 構成を`src/app`に統一。`components.json`は`srcDir: "src"`/`css: "src/app/globals.css"`に調整。型は現状`page.tsx`内に暫定定義（専用ファイルは未作成）。

- [x] 2. データ管理システムの実装
  - LocalStorageManagerクラスの実装（`src/lib/storage.ts`）
  - ULID生成ユーティリティの実装（`src/lib/ulid.ts`、モノトニック対応）
  - データ検証/サニタイズ（`src/lib/types.ts`）
  - 画面統合：現行UI向けの `src/lib/notes.ts` を作成し、`src/app/page.tsx` で利用
  - _要件: 8.1, 8.2, 8.3, 8.4_

- [x] 3. 基本UIコンポーネントの作成
  - shadcn/ui基本コンポーネントのセットアップ（button/input/card/badge 追加済み）
  - AppLayoutコンポーネントを追加（`src/components/app-layout.tsx`）
  - BottomTabsを実装し page から抽出（`src/components/bottom-tabs.tsx`）
  - `src/app/page.tsx` は既存 v0 実装を維持しつつリファクタ（重複解消）
  - _要件: 3.1, 12.1, 12.3_

- [x] 4. メモ入力機能の実装
  - MemoInputコンポーネントの作成（自動フォーカス、Enter保存）
  - 保存時のアニメーションとバイブレーション機能の実装
  - 入力後の自動フォーカス移動機能の実装
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [x] 5. タグ選択システムの実装
  - TagSelectorコンポーネントの作成
  - 4種類のタグ（ToDo、アイデア、メモ、その他）の実装
  - 複数タグ選択機能の実装
  - _要件: 2.1, 2.2, 2.3, 2.4_
  - メモ: 直近保存アイテムに対するチップUIでトグル実装。

- [x] 6. 記入ビューの完成
  - InputViewコンポーネントの実装
  - 直近3件のエントリ表示機能の実装
  - FAB（+ボタン）による入力フォーカス機能の実装
  - _要件: 1.5, 3.2_
  - メモ: LocalStorage(`memo.v1.items`)から読み込み/保存、直近3件を表示。

- [x] 7. アイテム表示とカード機能の実装
  - ItemCardコンポーネントの作成（`src/components/item-card.tsx`）
  - タイムスタンプ・タグ表示（既存実装を統合）
  - 検索結果/タグ別一覧で適用（タイムラインは今後適用）
  - _要件: 2.4, 5.3_

- [x] 8. タグ別ビューの実装
  - タグ統計とフィルタ（page 内で実装済）
  - ToDo チェック/ステータス切替（適用済）
  - 表示カードは ItemCard に統合
  - （必要なら将来 `TagView` に抽出）
  - _要件: 3.3, 4.1, 4.2, 4.3, 4.4_

- [x] 9. 統計表示機能の実装
  - StatsDisplay（`src/components/stats-display.tsx`）で今日の件数表示
  - タグ別件数はタグ別ビューの統計にて表示済み
  - _要件: 4.5, 7.1, 7.2, 7.3_

- [ ] 10. 時系列ビューの実装
  - TimelineViewコンポーネントの作成
  - 日付グループ化機能（Today, Yesterday, This Week, Older）の実装
  - ULID基準の時系列ソート機能の実装
  - _要件: 3.4, 5.1, 5.2, 5.3_

- [ ] 11. 検索機能の実装
  - SearchPaletteコンポーネントの作成
  - 全文検索機能の実装
  - 検索結果ハイライト機能の実装
  - _要件: 6.1, 6.2, 6.3, 6.4_

- [ ] 12. キーボードショートカットの実装
  - グローバルキーボードイベントハンドラーの実装
  - Enter、Cmd/Ctrl+Enter、Cmd/Ctrl+1/2/3、Cmd/Ctrl+Kショートカットの実装
  - フォーカス管理システムの実装
  - _要件: 10.1, 10.2, 10.3, 10.4_

- [ ] 13. データエクスポート・インポート機能の実装
  - JSONエクスポート機能の実装
  - JSONインポート機能とデータ検証の実装
  - データ破損防止とバックアップ機能の実装
  - _要件: 8.3, 8.4_

- [ ] 14. PWA基盤の実装
  - manifest.jsonの作成とPWA設定
  - Service Workerの基本実装
  - オフライン検出機能の実装
  - _要件: 9.1, 9.4_

- [ ] 15. PWAオフライン機能の実装
  - オフライン時のデータ保存機能の実装
  - 接続復旧時の同期機能の実装
  - インストールプロンプト機能の実装
  - _要件: 9.2, 9.3, 9.5_

- [ ] 16. パフォーマンス最適化の実装
  - React.memoによるコンポーネント最適化
  - 大量データ対応の仮想化実装
  - 検索インデックス機能の実装
  - _要件: 11.1, 11.2, 11.3, 11.4_

- [ ] 17. アクセシビリティ対応の実装
  - ARIAラベルとセマンティックマークアップの実装
  - キーボードナビゲーション対応の実装
  - スクリーンリーダー対応の実装
  - _要件: 12.2, 12.3, 12.5_

- [x] 18. テーマとスタイリングの完成
  - ターミナル風ダークテーマの実装
  - エメラルドアクセントカラーの適用
  - CSS変数によるテーマ管理システムの実装
  - _要件: 12.1, 12.4_
  - メモ: `globals.css`でOKLCHベースのトークンとTailwind v4設定を適用。

- [ ] 19. エラーハンドリングとバリデーションの実装
  - 包括的なエラーハンドリングシステムの実装
  - ユーザーフレンドリーなエラーメッセージの実装
  - データ整合性チェック機能の実装
  - _要件: 8.2, 11.4_

- [ ] 20. 統合テストとE2Eテストの実装
  - 主要ユーザーフローのテスト作成
  - キーボードショートカットのテスト実装
  - PWA機能とオフライン機能のテスト実装
  - _要件: 全要件の検証_
